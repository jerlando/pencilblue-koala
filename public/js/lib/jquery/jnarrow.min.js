jNarrow=function(e,t,n){var r=this;if(!$(e).position()||!$(t).position()){return}r.searchInput=$(e);r.elementToNarrow=$(t);r.options={searchChildElement:null,finishedFunction:null,searchButton:null,searchText:"Search",clearText:"x"};for(var i in n){r.options[i]=n[i]}r.onKeyUp=function(){var e=$(r.searchInput).val().toLowerCase();if(e.length==0){if(r.options.searchButton){$(r.options.searchButton).html(r.options.searchText)}var t=$(r.elementToNarrow).length;var n=0;$(r.elementToNarrow).each(function(){$(this).show();n++;if(n>=t){if(r.options.finishedFunction){r.options.finishedFunction(r.searchInput)}}})}else{if(r.options.searchButton){$(r.options.searchButton).html(r.options.clearText)}var t=$(r.elementToNarrow).length;var n=0;$(r.elementToNarrow).each(function(){if(r.options.searchChildElement){var i=$(this);var s=i.find(r.options.searchChildElement).length;var o=0;i.find(r.options.searchChildElement).each(function(){if($(this).html().toLowerCase().indexOf(e)>-1){i.show()}else{i.hide()}o++;if(o>=s){n++;if(n>=t){if(r.options.finishedFunction){r.options.finishedFunction(r.searchInput)}}}});return}if($(this).html().toLowerCase().indexOf(e)>-1){$(this).show()}else{$(this).hide()}n++;if(n>=t){if(r.options.finishedFunction){r.options.finishedFunction(r.searchInput)}}})}};r.clearSearch=function(){$(r.searchInput).val("");$(r.searchInput).focus();r.onKeyUp()};$(r.searchInput).keyup(r.onKeyUp);if(r.options.searchButton){$(r.options.searchButton).click(r.clearSearch)}}
